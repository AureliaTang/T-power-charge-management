import{u as N}from"./usePagingList.9a7b4e70.js";import{u as z,_ as R}from"./ComSchemaForm.0de9ae75.js";import{h as H}from"./moment.a565bb48.js";import{r as l}from"./request.6f3b4563.js";import{E as Y,O as q,o as f,b as U,d as o,c as a,e,w as r,f as n,aH as $,aG as G}from"./index.8245d607.js";import{P as K}from"./index.394aeaf5.js";import{P as Q}from"./Card.8f21f15a.js";import{B as s}from"./styleChecker.8bde6f41.js";import{a as F}from"./index.9646f4d7.js";import{S as j}from"./index.ca990b0f.js";import{T as J}from"./index.8ceafe38.js";import{P as W}from"./index.80f71a17.js";import"./index.654f18af.js";import"./Modal.0a8a4a29.js";import"./shallowequal.bae49919.js";import"./pickAttrs.3d8e67f0.js";import"./useDestroyed.e86faf5c.js";import"./FormItemContext.dcded345.js";import"./treeData.11936c29.js";import"./index.0090ea2e.js";import"./useState.9f20a74d.js";/* empty css                                                                   */import"./_plugin-vue_export-helper.cdc0426e.js";import"./index.c73c8db1.js";import"./index.f2af2a88.js";import"./Form.aea68981.js";import"./Col.49051607.js";import"./useFlexGapSupport.d12f7660.js";import"./station.62975caf.js";import"./dayjs.90cff45e.js";import"./index.37a241c6.js";import"./FilterFilled.98325481.js";const d="server/car_info/",X=t=>l({method:"GET",url:d,params:t}),Z=t=>l({method:"POST",url:d,data:t}),ee=t=>l({method:"PUT",url:d+t.car_id+"/",data:t}),g=t=>l({method:"DELETE",url:d+t+"/"}),te=async t=>{for(let c of t)await g(c)},ae={class:"page-wrap"},oe={class:"page-head"},ie={class:"page-head"},re={class:"fl"},ne={class:"fr"},se={class:"page-body"},le={class:"page-foot"},de={class:"fl"},ce={class:"fr"},$e={__name:"Vehicle",props:{userId:String},setup(t){const c=t,v=Y(()=>[{name:"car_registration_no",label:"Registration Number"},{name:"veh_id_fk",label:"Connect Type",names:"veh_charge_type"},{name:"veh_id_fk",label:"Brand",names:"veh_brand"},{name:"veh_id_fk",label:"Model",names:"veh_model"},{name:"register_datetime",label:"Register Datetime",type:"date"},{name:"appuser_id_fk",label:"Username",names:"appuser_username"}]),{listData:p,loading:y,total:C,page:k,size:b,selectedKeys:u,handleChangeQueryValues:_,handleChangePage:S,handleChangeSize:w,handleDelete:I,doQueryList:x,handleDeleteList:P}=N({queryListAction:X,deleteOneAction:g,pk:"car_id",deleteListAction:te}),{formTitle:V,formVisible:D,formValues:O,handleCreate:T,handleModify:B,handleCancel:A,handleSubmit:E}=z({createOneAction:Z,modifyOneAction:ee,editSuccessCallback:x,pk:"car_id"});q(()=>c.userId,i=>{i?_({userId:i},1):p.value=[]},{immediate:!0});const L=i=>{_({search:i})};return(i,me)=>(f(),U("div",ae,[o("div",oe,[a(e(K),{title:"Vehicle Management"})]),o("div",ie,[o("div",re,[a(e(s),{type:"primary",onClick:e(T)},{default:r(()=>[a(e(Q)),n("Add New Vehicle ")]),_:1},8,["onClick"])]),o("div",ne,[a(e(F),{type:"text",onSearch:L,allowClear:""})])]),o("div",se,[a(e(J),{"row-key":"id",bordered:"","data-source":e(p),loading:e(y),pagination:!1,columns:[{title:"Vehicle ID",dataIndex:"car_id"},{title:"Registration Number",dataIndex:"car_registration_no"},{title:"Connect Type",dataIndex:["veh_id_fk","veh_charge_type"]},{title:"Brand",dataIndex:["veh_id_fk","veh_brand"]},{title:"Model",dataIndex:["veh_id_fk","veh_model"]},{title:"Register Datetime",dataIndex:"register_datetime",customRender:({text:m})=>e(H)(m).utc().format("YYYY-MM-DD HH:mm:ss")},{title:"Username",dataIndex:["appuser_id_fk","appuser_username"]},{title:"Operate",dataIndex:"action",width:250,align:"center"}],"row-selection":{selectedRowKeys:e(u),onChange:i.handleChangeSelect}},{bodyCell:r(({column:m,record:h})=>[m.dataIndex==="action"?(f(),$(e(j),{key:0},{default:r(()=>[a(e(s),{type:"primary",onClick:M=>e(B)(h)},{default:r(()=>[n("modify")]),_:2},1032,["onClick"]),a(e(s),{type:"primary",onClick:M=>e(I)(h),danger:""},{default:r(()=>[n("delete")]),_:2},1032,["onClick"])]),_:2},1024)):G("",!0)]),_:1},8,["data-source","loading","columns","row-selection"])]),o("div",le,[o("div",de,[a(e(s),{danger:"",disabled:e(u).length===0,onClick:e(P)},{default:r(()=>[n("Delete All")]),_:1},8,["disabled","onClick"])]),o("div",ce,[a(e(W),{current:e(k),"page-size":e(b),total:e(C),onChange:e(S),onShowSizeChange:e(w)},null,8,["current","page-size","total","onChange","onShowSizeChange"])])]),a(R,{width:800,visible:e(D),title:e(V),fields:e(v),values:e(O),onSubmit:e(E),onCancel:e(A)},null,8,["visible","title","fields","values","onSubmit","onCancel"])]))}};export{$e as default};
