import{u as M}from"./usePagingList.8c043149.js";import{u as N,_ as A}from"./ComSchemaForm.655be5ba.js";import{h as p}from"./moment.9709ab41.js";import{r as l,B as _}from"./request.9103401f.js";import{q as G}from"./station.b4a23395.js";import{a as H}from"./index.fbd8f8be.js";import{T as U}from"./index.5c51c5c7.js";import{P as $}from"./index.53ff0e32.js";import{a as s,B as h,j as F,o as g,b as Q,d as a,c as r,e,w as d,am as R,f,al as j}from"./index.b3cdcf3a.js";import{P as K}from"./index.f8c0f2bb.js";import{S as J}from"./index.668ef068.js";import"./index.96c37501.js";import"./Modal.04470cd5.js";import"./index.9eec16e7.js";import"./useDestroyed.7e3d3621.js";import"./debounce.7858bc7c.js";import"./isSymbol.b53cdcda.js";import"./treeData.11936c29.js";import"./Card.6c18e41b.js";import"./useState.d458e043.js";import"./Col.fd6c17f6.js";import"./useFlexGapSupport.6b891330.js";/* empty css                                                                   */import"./_plugin-vue_export-helper.cdc0426e.js";import"./index.56c726a6.js";import"./FilterFilled.59fd6a7c.js";import"./index.b4cda1c7.js";const c="/server/charge_order/",W=t=>l({method:"GET",url:c,params:t}),X=t=>l({method:"GET",url:c+t+"/"}),Z=t=>l({method:"DELETE",url:c+t+"/",data:{id:t}}),ee=t=>l({method:"PUT",url:c+t.order_id+"/",data:t}),te={class:"page-wrap"},ae={class:"page-head"},re={class:"page-head"},oe=a("div",{class:"fl"},null,-1),ne={class:"fr"},ie={class:"page-body"},se={class:"page-foot"},de=a("div",{class:"fl"},null,-1),le={class:"fr"},Ae={__name:"Order",setup(t){const m=s([]),y=h(()=>[{name:"order_start_datetime",label:"Order start time",type:"date"},{name:"order_end_datetime",label:"Order end time",type:"date"},{name:"charge_capacity",label:"Charging capacity"},{name:"order_fee",label:"Total order cost"},{name:"pile_id_fk",label:"Charging station ID"},{name:"appuser_id_fk",label:"Username",names:"appuser_username"}]);h(()=>[{name:"order_id",label:"Order ID"},{name:"name",label:"user name"},{name:"pile_id",label:"Charging station ID"}]);const{listData:C,loading:b,total:S,page:v,size:k,selectedKeys:ce,handleDelete:x,queryValues:me,handleChangeSelect:ue,handleChangeQueryValues:I,handleChangePage:O,handleChangeSize:w,doQueryList:D}=M({pk:"order_id",queryListAction:W,deleteOneAction:Z}),{formTitle:T,formVisible:V,formValues:P,handleCancel:q,handleModify:z,handleSubmit:E}=N({queryOneAction:X,modifyOneAction:ee,editSuccessCallback:D,pk:"order_id"}),Y=o=>{I({search:o})};s({options:[],pagination:{page:1,pageSize:10,total:0},isLoading:!0});const B=async()=>{const o=await G();return m.rawValue=o.results,m.rawValue.forEach(n=>{n.label=n.station_id,n.value=n.station_name}),{infos:m}};return F(()=>{B()}),s(!1),s({}),(o,n)=>(g(),Q("div",te,[a("div",ae,[r(e(K),{title:"Order Management"})]),a("div",re,[oe,a("div",ne,[r(e(H),{type:"text",onSearch:Y,allowClear:""})])]),a("div",ie,[r(e(U),{"row-key":"order_id",bordered:"","data-source":e(C),loading:e(b),pagination:!1,columns:[{title:"ID",dataIndex:"order_id",width:120},{title:"Order start time",dataIndex:"order_start_datetime",customRender:({text:i})=>e(p)(i).utc().format("YYYY-MM-DD hh:mm:ss")},{title:"Order end time",dataIndex:"order_end_datetime",customRender:({text:i})=>e(p)(i).utc().format("YYYY-MM-DD HH:mm:ss")},{title:"Charging capacity",dataIndex:"charge_capacity"},{title:"Total order cost\uFF08include GST\uFF09",dataIndex:"order_fee"},{title:"Charging station ID",dataIndex:"pile_id_fk"},{title:"User Name",dataIndex:["appuser_id_fk","appuser_username"]},{title:"Operate",dataIndex:"action",width:250,align:"center"}]},{bodyCell:d(({column:i,record:u})=>[i.dataIndex==="action"?(g(),R(e(J),{key:0},{default:d(()=>[r(e(_),{type:"primary",onClick:L=>e(z)(u)},{default:d(()=>[f("modify")]),_:2},1032,["onClick"]),r(e(_),{type:"primary",danger:"",onClick:L=>e(x)(u)},{default:d(()=>[f("delete")]),_:2},1032,["onClick"])]),_:2},1024)):j("",!0)]),_:1},8,["data-source","loading","columns"])]),a("div",se,[de,a("div",le,[r(e($),{current:e(v),"page-size":e(k),total:e(S),showSizeChanger:!1,hideOnSinglePage:"true",onChange:e(O),onShowSizeChange:e(w)},null,8,["current","page-size","total","onChange","onShowSizeChange"])])]),r(A,{width:800,visible:e(V),title:e(T),fields:e(y),values:e(P),onSubmit:e(E),onCancel:e(q)},null,8,["visible","title","fields","values","onSubmit","onCancel"])]))}};export{Ae as default};
