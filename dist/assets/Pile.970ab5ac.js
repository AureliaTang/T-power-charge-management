import{u as $,_ as W}from"./ComSchemaForm.43d10280.js";import{u as D}from"./usePagingList.e08fdc37.js";import{q as Q,d as E,a as F,c as K,m as U,s as H,b as J}from"./pile.fa470cb4.js";import"./request.2288667a.js";import{x as R,o as c,b as j,d as n,c as l,e,w as i,f as o,ao as p,an as G,m as g}from"./index.e783c946.js";import{P as X}from"./index.5083c87b.js";import{P as Y}from"./Card.531c7c8f.js";import{B as s}from"./styleChecker.df42cde5.js";import{a as Z}from"./index.30480f03.js";import{S as ee}from"./index.c47d3d19.js";import{T as te}from"./index.c901d8bd.js";import{P as ae}from"./index.8ff1420b.js";import{M as h}from"./Modal.b014ebc0.js";import"./index.9641cdf4.js";import"./debounce.81a4c1ce.js";import"./isSymbol.7e901a66.js";import"./treeData.11936c29.js";/* empty css                                                                   */import"./_plugin-vue_export-helper.cdc0426e.js";import"./useState.656607d1.js";import"./index.794e3fba.js";import"./Col.40afaf57.js";import"./useFlexGapSupport.361aa632.js";import"./station.22a425f9.js";import"./index.33f30a55.js";import"./useDestroyed.4dcf2a17.js";import"./index.d80e0f98.js";import"./FilterFilled.314139b3.js";const le={class:"page-wrap"},ie={class:"page-head"},ne={class:"page-head"},oe={class:"fl"},se={class:"fr"},re={class:"page-body"},ce={class:"page-foot"},de={class:"fl"},pe={class:"fr"},Ee={__name:"Pile",setup(me){const f=R(()=>[{name:"pile_charge_type",label:"Name"},{name:"pile_model",label:"Model"},{name:"pile_location_state",label:"State",type:"select",inputProps:{options:[{value:"nsw",label:"NSW"},{value:"tas",label:"TAS"},{value:"qld",label:"QLD"},{value:"vic",label:"VIC"},{value:"wa",label:"WA"},{value:"nt",label:"NT"},{value:"act",label:"ACT"},{value:"as",label:"AS"}]}},{name:"pile_sn",label:"SN"},{name:"pile_vendor",label:"Supplier"},{name:"charge_price",label:"Price"},{name:"pile_connect_no",label:"Connect Number"},{name:"pile_outputcurrentmax",label:"Max output power"},{name:"pile_status",label:"Working Status",type:"select",inputProps:{options:[{value:"Available",label:"Available"},{value:"Unavailable",label:"Unavailable"}]}},{name:"station_id_fk",label:"Station Id Fk",type:"select",inputProps:{options:JSON.parse(localStorage.getItem("stationIdList"))}}]),{listData:b,loading:y,size:C,total:S,queryValues:ue,selectedKeys:_,handleDelete:v,doQueryList:m,handleChangeSelect:k,handleChangeQueryValues:w,handleChangePage:x,handleChangeSize:I,handleDeleteList:P}=D({pk:"pile_id",queryListAction:Q,deleteOneAction:E,deleteListAction:F}),{formTitle:A,formVisible:O,formValues:N,handleCreate:M,handleModify:V,handleCancel:L,handleSubmit:z}=$({pk:"pile_id",createOneAction:K,modifyOneAction:U,editSuccessCallback:m}),T=a=>{w({search:a})},B=async a=>{console.log(a);let d="Are you sure to start?";const r={id_tag:a.pile_sn,connector_id:a.pile_connect_no,user_token:localStorage.getItem("token")};h.confirm({title:d,onOk:async()=>{try{const t=await H(r);console.log(t),g.success(t.message),m()}catch(t){throw t}}})},q=async a=>{let d="Are you sure to stop?";const r={id_tag:a.pile_sn,connector_id:a.pile_connect_no,user_token:localStorage.getItem("token")};h.confirm({title:d,onOk:async()=>{try{const t=await J(r);console.log(t),g.success(t.message),m()}catch(t){throw t}}})};return(a,d)=>(c(),j("div",le,[n("div",ie,[l(e(X),{title:"Charging Pile Management"})]),n("div",ne,[n("div",oe,[l(e(s),{type:"primary",onClick:e(M)},{default:i(()=>[l(e(Y)),o("Add New Charging Pile ")]),_:1},8,["onClick"])]),n("div",se,[l(e(Z),{type:"text",onSearch:T,allowClear:""})])]),n("div",re,[l(e(te),{"row-key":"pile_id",bordered:"","data-source":e(b),loading:e(y),pagination:!1,columns:[{title:"ID",dataIndex:"pile_id"},{title:"Charging Pile SN",dataIndex:"pile_sn",width:100,align:"center"},{title:"Name",dataIndex:"pile_charge_type"},,{title:"Model",dataIndex:"pile_model",width:100,align:"center"},{title:"State",dataIndex:"pile_location_state",width:100,align:"center"},{title:"Supplier",dataIndex:"pile_vendor",width:100,align:"center"},{title:"Connect Number",dataIndex:"pile_connect_no",width:250,align:"center"},{title:"Max Output Power",dataIndex:"pile_outputcurrentmax",width:250,align:"center"},{title:"Price",dataIndex:"charge_price",width:100,align:"center"},{title:"Working Status",dataIndex:"pile_status",width:250,align:"center"},{title:"Operate",dataIndex:"action",align:"center"}],"row-selection":{selectedRowKeys:e(_),onChange:e(k)}},{bodyCell:i(({column:r,record:t})=>[r.dataIndex==="action"?(c(),p(e(ee),{key:0},{default:i(()=>[t.pile_status=="Available"?(c(),p(e(s),{key:0,onClick:u=>B(t),style:{width:"116px"}},{default:i(()=>[o("Start")]),_:2},1032,["onClick"])):t.pile_status=="Charging"?(c(),p(e(s),{key:1,onClick:u=>q(t),style:{width:"116px"}},{default:i(()=>[o("Stop ")]),_:2},1032,["onClick"])):(c(),p(e(s),{key:2,disabled:"",style:{width:"116px"}},{default:i(()=>[o("unavaliable")]),_:1})),l(e(s),{type:"primary",onClick:u=>e(V)(t)},{default:i(()=>[o("modify")]),_:2},1032,["onClick"]),l(e(s),{type:"primary",danger:"",onClick:u=>e(v)(t)},{default:i(()=>[o("delete")]),_:2},1032,["onClick"])]),_:2},1024)):G("",!0)]),_:1},8,["data-source","loading","row-selection"])]),n("div",ce,[n("div",de,[l(e(s),{danger:"",disabled:e(_).length===0,onClick:e(P)},{default:i(()=>[o("Delete All")]),_:1},8,["disabled","onClick"])]),n("div",pe,[l(e(ae),{current:a.page,"page-size":e(C),total:e(S),showSizeChanger:!1,onChange:e(x),onShowSizeChange:e(I),hideOnSinglePage:"true"},null,8,["current","page-size","total","onChange","onShowSizeChange"])])]),l(W,{width:800,visible:e(O),title:e(A),fields:e(f),values:e(N),onSubmit:e(z),onCancel:e(L)},null,8,["visible","title","fields","values","onSubmit","onCancel"])]))}};export{Ee as default};
