import{u as Q,_ as F}from"./ComSchemaForm.73744b05.js";import{u as K}from"./usePagingList.5681cecf.js";import{r as c,B as s}from"./request.cea70209.js";import{B as U,o as p,b as G,d as o,c as n,e,w as i,f as r,am as m,al as H,m as y}from"./index.4357c83e.js";import{P as J}from"./index.db3bab18.js";import{P as R}from"./Card.68297c3e.js";import{a as j}from"./index.5b676e8a.js";import{S as X}from"./index.4532f20e.js";import{T as Y}from"./index.de41f782.js";import{P as Z}from"./index.9e00fdb0.js";import{M as S}from"./Modal.4d727fed.js";import"./index.925b98d7.js";import"./debounce.58757216.js";import"./isSymbol.074e984d.js";import"./treeData.11936c29.js";/* empty css                                                                   */import"./_plugin-vue_export-helper.cdc0426e.js";import"./useState.359d49dd.js";import"./index.64bce1ba.js";import"./Col.0570af65.js";import"./useFlexGapSupport.686de91a.js";import"./station.64808e7d.js";import"./index.5904abc1.js";import"./useDestroyed.9b6f21d3.js";import"./index.8f1e641a.js";import"./FilterFilled.9fcad8c6.js";const _="/server/get_charge_pile/",ee=a=>c({method:"GET",url:_,params:a}),te=a=>c({method:"POST",url:_,data:a}),ae=a=>c({method:"put",url:_+a.pile_id+"/",data:a}),v=a=>c({method:"DELETE",url:_+a+"/"}),le=async a=>{for(let h of a)await v(h)},ne=a=>c({method:"POST",url:"/server/start_ocpp/",timeout:999*1e3,data:a}),ie=a=>c({method:"POST",url:"/server/stop_ocpp/",timeout:999*1e3,data:a}),oe={class:"page-wrap"},se={class:"page-head"},re={class:"page-head"},ce={class:"fl"},de={class:"fr"},pe={class:"page-body"},ue={class:"page-foot"},me={class:"fl"},_e={class:"fr"},Qe={__name:"Pile",setup(a){const h=U(()=>[{name:"pile_charge_type",label:"Name"},{name:"pile_model",label:"Model"},{name:"pile_location_state",label:"State",type:"select",inputProps:{options:[{value:"nsw",label:"NSW"},{value:"tas",label:"TAS"},{value:"qld",label:"QLD"},{value:"vic",label:"VIC"},{value:"wa",label:"WA"},{value:"nt",label:"NT"},{value:"act",label:"ACT"},{value:"as",label:"AS"}]}},{name:"pile_sn",label:"SN"},{name:"pile_vendor",label:"Supplier"},{name:"charge_price",label:"Price"},{name:"pile_connect_no",label:"Connect Number"},{name:"pile_outputcurrentmax",label:"Max output power"},{name:"pile_status",label:"Working Status",type:"select",inputProps:{options:[{value:"Available",label:"Available"},{value:"Unavailable",label:"Unavailable"}]}},{name:"station_id_fk",label:"Station Id Fk",type:"select",inputProps:{options:JSON.parse(localStorage.getItem("stationIdList"))}}]),{listData:C,loading:k,size:w,total:x,queryValues:he,selectedKeys:b,handleDelete:P,doQueryList:g,handleChangeSelect:I,handleChangeQueryValues:O,handleChangePage:A,handleChangeSize:N,handleDeleteList:T}=K({pk:"pile_id",queryListAction:ee,deleteOneAction:v,deleteListAction:le}),{formTitle:L,formVisible:M,formValues:V,handleCreate:z,handleModify:B,handleCancel:E,handleSubmit:q}=Q({pk:"pile_id",createOneAction:te,modifyOneAction:ae,editSuccessCallback:g}),$=l=>{O({search:l})},D=async l=>{console.log(l);let u="Are you sure to start?";const d={id_tag:l.pile_sn,connector_id:l.pile_connect_no,user_token:localStorage.getItem("token")};S.confirm({title:u,onOk:async()=>{try{const t=await ne(d);console.log(t),y.success(t.message),g()}catch(t){throw t}}})},W=async l=>{let u="Are you sure to stop?";const d={id_tag:l.pile_sn,connector_id:l.pile_connect_no,user_token:localStorage.getItem("token")};S.confirm({title:u,onOk:async()=>{try{const t=await ie(d);console.log(t),y.success(t.message),g()}catch(t){throw t}}})};return(l,u)=>(p(),G("div",oe,[o("div",se,[n(e(J),{title:"Charging Pile Management"})]),o("div",re,[o("div",ce,[n(e(s),{type:"primary",onClick:e(z)},{default:i(()=>[n(e(R)),r("Add New Charging Pile ")]),_:1},8,["onClick"])]),o("div",de,[n(e(j),{type:"text",onSearch:$,allowClear:""})])]),o("div",pe,[n(e(Y),{"row-key":"pile_id",bordered:"","data-source":e(C),loading:e(k),pagination:!1,columns:[{title:"ID",dataIndex:"pile_id"},{title:"Charging Pile SN",dataIndex:"pile_sn",width:100,align:"center"},{title:"Name",dataIndex:"pile_charge_type"},,{title:"Model",dataIndex:"pile_model",width:100,align:"center"},{title:"State",dataIndex:"pile_location_state",width:100,align:"center"},{title:"Supplier",dataIndex:"pile_vendor",width:100,align:"center"},{title:"Connect Number",dataIndex:"pile_connect_no",width:250,align:"center"},{title:"Max Output Power",dataIndex:"pile_outputcurrentmax",width:250,align:"center"},{title:"Price",dataIndex:"charge_price",width:100,align:"center"},{title:"Working Status",dataIndex:"pile_status",width:250,align:"center"},{title:"Operate",dataIndex:"action",align:"center"}],"row-selection":{selectedRowKeys:e(b),onChange:e(I)}},{bodyCell:i(({column:d,record:t})=>[d.dataIndex==="action"?(p(),m(e(X),{key:0},{default:i(()=>[t.pile_status=="Available"?(p(),m(e(s),{key:0,onClick:f=>D(t),style:{width:"116px"}},{default:i(()=>[r("Start")]),_:2},1032,["onClick"])):t.pile_status=="Charging"?(p(),m(e(s),{key:1,onClick:f=>W(t),style:{width:"116px"}},{default:i(()=>[r("Stop ")]),_:2},1032,["onClick"])):(p(),m(e(s),{key:2,disabled:"",style:{width:"116px"}},{default:i(()=>[r("unavaliable")]),_:1})),n(e(s),{type:"primary",onClick:f=>e(B)(t)},{default:i(()=>[r("modify")]),_:2},1032,["onClick"]),n(e(s),{type:"primary",danger:"",onClick:f=>e(P)(t)},{default:i(()=>[r("delete")]),_:2},1032,["onClick"])]),_:2},1024)):H("",!0)]),_:1},8,["data-source","loading","row-selection"])]),o("div",ue,[o("div",me,[n(e(s),{danger:"",disabled:e(b).length===0,onClick:e(T)},{default:i(()=>[r("Delete All")]),_:1},8,["disabled","onClick"])]),o("div",_e,[n(e(Z),{current:l.page,"page-size":e(w),total:e(x),showSizeChanger:!1,onChange:e(A),onShowSizeChange:e(N),hideOnSinglePage:"true"},null,8,["current","page-size","total","onChange","onShowSizeChange"])])]),n(F,{width:800,visible:e(M),title:e(L),fields:e(h),values:e(V),onSubmit:e(q),onCancel:e(E)},null,8,["visible","title","fields","values","onSubmit","onCancel"])]))}};export{Qe as default};
